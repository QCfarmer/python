# 关于链表的思考

有很多逻辑完备和实现细节，很多书上都没讲特别细。

## 能否添加重复的节点

添加的时候修改的是Node对象的_next，所以如果添加重复的点，会在链表中形成环，打印链表的时候就会陷入死循环。

同桌说，看需求，然后进行修改。

理论上说节点指向某一块存储空间，链表的功能是可以不按连续空间存储数据。如果添加重复的节点，节点对象的_next在第一次插入后已经改变，再次插入会在链表中形成环。leetcode上就有题目是如何检测链表中的环（用快慢指针）。实现只是为了理解，大家写的链表都是添加重复节点打印会死循环的，也就是不会用到添加重复节点的。

于是我写了两个版本。一个是不能添加重复的，也就是原书和大多数网上能搜到的实现的方法。一个是通过复制节点的data值创建新Node对象，来实现可以添加重复节点到链表中，实际上只是添加的值，没有添加这个节点对象。

## 删除节点是比较节点的data值还是比较是否为同一地址的数据空间

节点指向某一存储空间，那么删除应该用a is b而不是a == b，即比较的是是否为同一地址下的同一数据，而不是单纯的data值，但网上能搜到的链表删除节点实现都是用节点的data值进行比较，例如定义：
```
a = Node(11)
b = Node(22)
c = Node(33)
```
然后将a,b,c插入了链表linked_list中，然后又定义：
```
d = Node(11)
```
此时这个链表为11->22->33。然后进行删除操作：
```
linked_list.delete_by_node(d)
```
这个链表就会删掉11，变成22->33，因为大家实现的时候都是比较的data值，d.data为11，存在于链表中，所以会删掉a节点。但理论上d节点不存在于链表中，a和d指向不同的存储空间。

所以，大家实现的时候都是为了理解链表是个啥，实现简单就行了，都没有说那么多。

## 删除值或节点是删除第一个还是所有的

原书里删除值是删除的所有值，删除节点是只删除一个节点，因为添加的时候不能实现添加重复节点，删除当然用不着咯。

所以同桌说，完全看需求。

## 总结

简单链表的实现，初始化一般要一个头节点，方法有插入和移除，就差不多了，理解了就好了。

然后其他初始化参数和方法，完全看需求。

比如说尾节点，长度，头插入，尾插入，重复节点的插入，删除一个值还是所有值，删除节点还是值，完全看需求，再进行修改。

然后同桌还说了一些操作系统的知识。删除文件只是切断指针，让操作系统无法访问，其实磁盘上那块空间的数据还在，只是访问不到，等下次写入数据的时候又会建立指针，然后覆盖写入，才算是改变了磁盘上的数据。因此操作系统显示的可用空间并不是真正的物理上磁盘上没存数据的空间，只是访问不到的空间。没用到的空间可能存了一些无意义的数据呢。有些人电脑出问题了，恢复文件，也是因为删掉的文件并不是真正从磁盘上被抹掉了，而是切断了指针地址访问，无法访问到，只要重新建立访问，就可以读取。

嗐，又是菜鸡啥也不懂的一天。